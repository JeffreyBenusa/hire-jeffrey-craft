<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta charset="utf-8"/>
    <title>{{ entry.title ~ " | HireJeffrey.com" | default("Hire Jeffrey") }} </title>
    <meta name="description" content="This is my page description" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="referrer" content="strict-origin-when-cross-origin"/>

    <script>
        // Define the cookie name and expiration
        const COOKIE_NAME = "gtm_cookie_consent";
        const COOKIE_EXPIRATION_DAYS = 365; // 1 year

        // Function to set a cookie with encoding
        function setCookie(name, value, days) {
            let expires = "";
            if (days) {
                let date = new Date();
                date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
                expires = "; expires=" + date.toUTCString();
            }
            const encodedValue = encodeURIComponent(JSON.stringify(value));
            document.cookie = `${name}=${encodedValue}; path=/; SameSite=Lax; Secure${expires}`;
        }

        // Function to get and decode a cookie
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) {
                return decodeURIComponent(parts.pop().split(";").shift());
            }
            return null;
        }

        // Define default consent settings (all granted)
        const consentSettings = {};

        // Check if cookie exists, otherwise set it
        let storedConsent = getCookie(COOKIE_NAME);
        if (!storedConsent) {
            setCookie(COOKIE_NAME, consentSettings, COOKIE_EXPIRATION_DAYS);
        }

        // // Inform Google Consent Mode that all categories are granted
        // window.dataLayer = window.dataLayer || [];
        // function gtag() { dataLayer.push(arguments); }
        // gtag("consent", "default", storedConsent);
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
                new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
            j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
            'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','{{ getenv("GTM_ID") }}');</script>
    <!-- End Google Tag Manager -->

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=roboto:100,500,700,900" rel="stylesheet" />

    {{ craft.vite.script("src/js/app.js", false) }}
</head>
<body class="">
    <a href="#main-content" class="absolute left-0 top-0 bg-blue-500 text-white py-2 px-4 z-50 transform -translate-y-full focus:translate-y-0 transition">Skip to main content</a>
    {% include '_globals/header' %}
    <main id="main-content" class="min-h-screen font-sans">
        {% block content %}
        {% endblock %}
    </main>
    {% include '_globals/footer' %}
    {% include '_globals/cookieBanner' %}
</body>
</html>

